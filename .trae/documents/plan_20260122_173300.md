# 修复数据库连接问题 - 使用 createClient 代替 createKysely

## 问题原因
`@vercel/postgres-kysely` 库有两个函数：
- `createKysely()` - 专门为 Vercel Postgres 连接池设计
- `createClient()` - 用于直接连接（适用于 Supabase 等其他 PostgreSQL 数据库）

由于你使用的是 Supabase 而不是 Vercel Postgres，应该使用 `createClient()`。

## 解决方案
修改 [packages/db/index.ts](file:///d:/project/imagePrompt/packages/db/index.ts) 和 [packages/auth/db.ts](file:///d:/project/imagePrompt/packages/auth/db.ts)，将 `createKysely()` 改为 `createClient()`：

**修改前：**
```typescript
import { createKysely } from "@vercel/postgres-kysely";
export const db = createKysely<Database>();
```

**修改后：**
```typescript
import { createClient } from "@vercel/postgres-kysely";
export const db = createClient<Database>();
```

## 说明
- `createClient()` 适用于直接连接模式，不需要连接池
- Supabase 的连接字符串是直接连接格式
- 这样可以避免 "invalid_connection_string" 错误