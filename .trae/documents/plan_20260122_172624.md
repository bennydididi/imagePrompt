# 修复 Supabase 数据库连接字符串错误

## 问题原因
`@vercel/postgres-kysely` 的 `createKysely()` 需要使用连接池（pooled connection），但当前的 Supabase 连接字符串缺少 `?pgbouncer=true` 参数。

## 解决方案
更新 [.env.local](file:///d:/project/imagePrompt/.env.local#L49) 中的 `POSTGRES_URL`，在连接字符串末尾添加 `?pgbouncer=true` 参数：

**修改前：**
```
POSTGRES_URL="postgresql://postgres.ndkqefljpnqymigfsvfw:Taobao2020%23@aws-1-us-east-1.pooler.supabase.com:5432/postgres"
```

**修改后：**
```
POSTGRES_URL="postgresql://postgres.ndkqefljpnqymigfsvfw:Taobao2020%23@aws-1-us-east-1.pooler.supabase.com:5432/postgres?pgbouncer=true"
```

## 说明
- `pgbouncer=true` 参数告诉 Supabase 使用 PgBouncer 连接池
- `createKysely()` 需要连接池才能正常工作
- Supabase 的 `pooler` 子域名已经配置了连接池，但需要显式指定参数