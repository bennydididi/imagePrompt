# Saasfly é¡¹ç›®æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

Saasfly æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„ Next.js SaaS åº”ç”¨ç¨‹åºæ ·æ¿ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºç°ä»£åŒ–çš„ SaaS åº”ç”¨ã€‚å®ƒé‡‡ç”¨äº†æœ€æ–°çš„ Web æŠ€æœ¯æ ˆï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·è®¤è¯ã€è®¢é˜…ç®¡ç†ã€æ”¯ä»˜å¤„ç†ç­‰ä¼ä¸šçº§åŠŸèƒ½ã€‚

## é¡¹ç›®æ¶æ„

### æ•´ä½“ç»“æ„
```
saasfly/
â”œâ”€â”€ apps/                 # åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ auth-proxy/      # è®¤è¯ä»£ç†åº”ç”¨
â”‚   â””â”€â”€ nextjs/          # ä¸» Next.js åº”ç”¨
â”œâ”€â”€ packages/            # å…±äº«åŒ…
â”‚   â”œâ”€â”€ api/             # tRPC API å±‚
â”‚   â”œâ”€â”€ auth/            # è®¤è¯ç›¸å…³
â”‚   â”œâ”€â”€ db/              # æ•°æ®åº“å±‚
â”‚   â”œâ”€â”€ stripe/          # Stripe æ”¯ä»˜
â”‚   â”œâ”€â”€ ui/              # UI ç»„ä»¶åº“
â”‚   â””â”€â”€ common/          # é€šç”¨åŠŸèƒ½
â””â”€â”€ tooling/             # å¼€å‘å·¥å…·é…ç½®
```

### Monorepo ç®¡ç†
é¡¹ç›®ä½¿ç”¨ [Turbo](https://turbo.build/) è¿›è¡Œ Monorepo ç®¡ç†ï¼Œæ”¯æŒï¼š
- å¹¶è¡Œæ„å»ºå’Œç¼“å­˜
- ä¾èµ–å…³ç³»ç®¡ç†
- ç»Ÿä¸€çš„ä»»åŠ¡è¿è¡Œ

## æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **Next.js 14** - React å…¨æ ˆæ¡†æ¶ï¼Œä½¿ç”¨ App Router
- **React 18** - ç”¨æˆ·ç•Œé¢åº“
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript

### åç«¯ä¸ API
- **tRPC** - ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨çš„ API
- **PostgreSQL** - ä¸»æ•°æ®åº“
- **Prisma** - æ•°æ®åº“ ORM
- **Kysely** - ç±»å‹å®‰å…¨çš„ SQL æŸ¥è¯¢æ„å»ºå™¨

### è®¤è¯ä¸æˆæƒ
- **Clerk** - ç°ä»£åŒ–çš„ç”¨æˆ·ç®¡ç†å¹³å°ï¼ˆä¸»è¦æ¨èï¼‰
- **NextAuth.js** - çµæ´»çš„è®¤è¯è§£å†³æ–¹æ¡ˆï¼ˆå¯é€‰ï¼‰

### æ”¯ä»˜ä¸è®¢é˜…
- **Stripe** - æ”¯ä»˜å¤„ç†å’Œè®¢é˜…ç®¡ç†
- æ”¯æŒä¸‰ç§è®¢é˜…è®¡åˆ’ï¼šå…è´¹ã€ä¸“ä¸šã€ä¼ä¸š

### UI ä¸æ ·å¼
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Shadcn/ui** - åŸºäº Radix UI çš„ç»„ä»¶åº“
- **Framer Motion** - React åŠ¨ç”»åº“
- **Lucide** - ç°ä»£å›¾æ ‡åº“

### çŠ¶æ€ç®¡ç†ä¸æ•°æ®è·å–
- **Zustand** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **TanStack Query** - æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†
- **SuperJSON** - å¢å¼ºçš„ JSON åºåˆ—åŒ–

### å¼€å‘å·¥å…·
- **Bun** - å¿«é€Ÿçš„ JavaScript è¿è¡Œæ—¶å’ŒåŒ…ç®¡ç†å™¨
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **Husky** - Git é’©å­
- **TypeScript** - ç±»å‹æ£€æŸ¥

### éƒ¨ç½²ä¸ç›‘æ§
- **Vercel** - å‰ç«¯éƒ¨ç½²å¹³å°
- **Vercel Analytics** - æ€§èƒ½ç›‘æ§
- **PostHog** - ç”¨æˆ·è¡Œä¸ºåˆ†æ

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- æ”¯æŒå¤šç§ç™»å½•æ–¹å¼ï¼ˆGitHubã€é‚®ç®±ç­‰ï¼‰
- JWT token ç®¡ç†
- ç”¨æˆ·ä¼šè¯ç®¡ç†
- å—ä¿æŠ¤è·¯ç”±

### 2. è®¢é˜…ç®¡ç†ç³»ç»Ÿ
- ä¸‰ç§è®¢é˜…è®¡åˆ’ï¼šFREEã€PROã€BUSINESS
- Stripe é›†æˆæ”¯ä»˜
- è®¢é˜…çŠ¶æ€ç®¡ç†
- è®¡è´¹å‘¨æœŸç®¡ç†

### 3. K8s é›†ç¾¤ç®¡ç†
```prisma
model K8sClusterConfig {
  id         Int
  name       String
  location   String
  authUserId String
  plan       SubscriptionPlan?
  status     Status?  // PENDING, CREATING, RUNNING ç­‰
  // ...
}
```

### 4. å†…å®¹ç®¡ç†ç³»ç»Ÿ
- **Contentlayer** - MDX å†…å®¹å¤„ç†
- æ”¯æŒåšå®¢æ–‡ç« 
- æ–‡æ¡£ç³»ç»Ÿ
- SEO ä¼˜åŒ–

### 5. å›½é™…åŒ– (i18n)
- å¤šè¯­è¨€æ”¯æŒ
- åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±å›½é™…åŒ–

### 6. ç®¡ç†åå°
- ç®¡ç†å‘˜ä»ªè¡¨æ¿
- ç”¨æˆ·ç®¡ç†
- ç³»ç»Ÿç›‘æ§

## æ•°æ®æ¨¡å‹

### æ ¸å¿ƒæ•°æ®è¡¨

#### Customerï¼ˆå®¢æˆ·ï¼‰
```typescript
{
  id: number
  authUserId: string
  name?: string
  plan: SubscriptionPlan  // FREE | PRO | BUSINESS
  stripeCustomerId?: string
  stripeSubscriptionId?: string
  // ...
}
```

#### Userï¼ˆç”¨æˆ·ï¼‰
```typescript
{
  id: string
  name?: string
  email?: string
  emailVerified?: DateTime
  image?: string
  accounts: Account[]
  sessions: Session[]
}
```

#### K8sClusterConfigï¼ˆK8sé›†ç¾¤é…ç½®ï¼‰
```typescript
{
  id: number
  name: string
  location: string
  authUserId: string
  plan?: SubscriptionPlan
  status?: Status  // PENDING | CREATING | RUNNING | STOPPED | DELETED
  // ...
}
```

## ç¯å¢ƒé…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

#### æœåŠ¡ç«¯å˜é‡
```bash
NEXTAUTH_URL=           # NextAuth.js URL
NEXTAUTH_SECRET=        # NextAuth.js å¯†é’¥
GITHUB_CLIENT_ID=       # GitHub OAuth å®¢æˆ·ç«¯ ID
GITHUB_CLIENT_SECRET=   # GitHub OAuth å®¢æˆ·ç«¯å¯†é’¥
STRIPE_API_KEY=         # Stripe API å¯†é’¥
STRIPE_WEBHOOK_SECRET=  # Stripe Webhook å¯†é’¥
POSTGRES_URL=           # PostgreSQL æ•°æ®åº“ URL
```

#### å®¢æˆ·ç«¯å˜é‡
```bash
NEXT_PUBLIC_APP_URL=    # åº”ç”¨å…¬å…± URL
NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID=      # Stripe ä¸“ä¸šç‰ˆäº§å“ ID
NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID= # æœˆä»˜ä»·æ ¼ ID
NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID=  # å¹´ä»˜ä»·æ ¼ ID
NEXT_PUBLIC_POSTHOG_KEY= # PostHog åˆ†æå¯†é’¥
NEXT_PUBLIC_POSTHOG_HOST= # PostHog ä¸»æœº
```

## å®‰è£…ä¸è®¾ç½®

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£… Bun (æ¨è)
curl -fsSL https://bun.sh/install | bash

# æˆ–è€…å®‰è£… Node.js + npm/yarn
# Node.js >= 18
```

### 2. å…‹éš†é¡¹ç›®
```bash
# ä½¿ç”¨ bun create (æ¨è)
bun create saasfly

# æˆ–è€…æ‰‹åŠ¨å…‹éš†
git clone https://github.com/saasfly/saasfly.git
cd saasfly
bun install
```

### 3. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env.local

# ç¼–è¾‘ .env.local æ–‡ä»¶ï¼Œé…ç½®æ‰€éœ€çš„ç¯å¢ƒå˜é‡
```

### 4. æ•°æ®åº“è®¾ç½®
```bash
# ç¡®ä¿ PostgreSQL è¿è¡Œå¹¶é…ç½® POSTGRES_URL

# æ¨é€æ•°æ®åº“æ¨¡å¼
bun db:push
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
bun run dev

# æˆ–è€…ä»…å¯åŠ¨ Web åº”ç”¨
bun run dev:web

# è®¿é—® http://localhost:3000
```

## é¡¹ç›®ç»“æ„è¯¦è§£

### åº”ç”¨å±‚ (apps/)

#### nextjs/ - ä¸»åº”ç”¨
```
src/
â”œâ”€â”€ app/                 # Next.js App Router é¡µé¢
â”‚   â”œâ”€â”€ [lang]/         # å›½é™…åŒ–è·¯ç”±
â”‚   â”œâ”€â”€ admin/          # ç®¡ç†åå°
â”‚   â”œâ”€â”€ api/            # API è·¯ç”±
â”‚   â””â”€â”€ layout.tsx      # æ ¹å¸ƒå±€
â”œâ”€â”€ components/         # React ç»„ä»¶
â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ lib/               # å·¥å…·å‡½æ•°
â”œâ”€â”€ hooks/             # React é’©å­
â”œâ”€â”€ types/             # TypeScript ç±»å‹
â””â”€â”€ trpc/              # tRPC å®¢æˆ·ç«¯é…ç½®
```

#### auth-proxy/ - è®¤è¯ä»£ç†
```
routes/
â””â”€â”€ [...auth].ts       # Clerk è®¤è¯è·¯ç”±
```

### åŒ…å±‚ (packages/)

#### api/ - tRPC API å±‚
```
src/
â”œâ”€â”€ router/            # API è·¯ç”±
â”‚   â”œâ”€â”€ auth.ts        # è®¤è¯ç›¸å…³
â”‚   â”œâ”€â”€ customer.ts    # å®¢æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ k8s.ts         # K8s é›†ç¾¤ç®¡ç†
â”‚   â””â”€â”€ stripe.ts      # æ”¯ä»˜ç›¸å…³
â”œâ”€â”€ trpc.ts            # tRPC é…ç½®
â””â”€â”€ root.ts            # ä¸»è·¯ç”±å™¨
```

#### db/ - æ•°æ®åº“å±‚
```
prisma/
â”œâ”€â”€ schema.prisma      # æ•°æ®åº“æ¨¡å¼
â”œâ”€â”€ types.ts           # ç”Ÿæˆçš„ç±»å‹
â””â”€â”€ enums.ts           # æšä¸¾å®šä¹‰
```

#### ui/ - UI ç»„ä»¶åº“
åŒ…å« 50+ ä¸ªé¢„æ„å»ºçš„ UI ç»„ä»¶ï¼š
- åŸºç¡€ç»„ä»¶ï¼šButton, Input, Card ç­‰
- é«˜çº§ç»„ä»¶ï¼šDataTable, InfiniteMovingCards ç­‰
- åŠ¨ç”»ç»„ä»¶ï¼šFramer Motion é›†æˆ
- å›¾è¡¨ç»„ä»¶ï¼šRecharts é›†æˆ

## API æ¥å£

### tRPC è·¯ç”±ç»“æ„

#### customerRouterï¼ˆå®¢æˆ·ç®¡ç†ï¼‰
```typescript
// æ›´æ–°ç”¨æˆ·å
updateUserName: protectedProcedure
  .input({ name: string, userId: string })
  .mutation(async ({ input }) => { ... })

// åˆ›å»ºå®¢æˆ·
insertCustomer: protectedProcedure
  .input({ userId: string })
  .mutation(async ({ input }) => { ... })

// æŸ¥è¯¢å®¢æˆ·ä¿¡æ¯
queryCustomer: protectedProcedure
  .input({ userId: string })
  .query(async ({ input }) => { ... })
```

#### k8sRouterï¼ˆK8s ç®¡ç†ï¼‰
```typescript
// é›†ç¾¤ç›¸å…³æ“ä½œ
createCluster: protectedProcedure...
listClusters: protectedProcedure...
deleteCluster: protectedProcedure...
```

#### stripeRouterï¼ˆæ”¯ä»˜ç®¡ç†ï¼‰
```typescript
// è®¢é˜…ç®¡ç†
createCheckoutSession: protectedProcedure...
createPortalSession: protectedProcedure...
getSubscription: protectedProcedure...
```

## å¼€å‘æŒ‡å—

### ä»£ç è´¨é‡
```bash
# ä»£ç æ£€æŸ¥
bun run lint

# æ ¼å¼åŒ–ä»£ç 
bun run format

# ç±»å‹æ£€æŸ¥
bun run typecheck

# æ„å»ºé¡¹ç›®
bun run build
```

### æ•°æ®åº“æ“ä½œ
```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
bun db:generate

# æ¨é€æ•°æ®åº“æ¨¡å¼
bun db:push

# åˆ›å»ºè¿ç§»
bun db:migrate

# æ‰“å¼€ Prisma Studio
bun db:studio
```

### éƒ¨ç½²
```bash
# Vercel ä¸€é”®éƒ¨ç½²
# ç‚¹å‡» README ä¸­çš„ "Deploy with Vercel" æŒ‰é’®

# æ‰‹åŠ¨éƒ¨ç½²
bun run build
# ç„¶åéƒ¨ç½²åˆ° Vercel æˆ–å…¶ä»–å¹³å°
```

## æ ¸å¿ƒç‰¹æ€§è¯¦è§£

### 1. è®¤è¯ç³»ç»Ÿ
- **Clerk é›†æˆ**: ç°ä»£åŒ–çš„ç”¨æˆ·ç®¡ç†
- **NextAuth.js æ”¯æŒ**: ä¼ ç»Ÿè®¤è¯æ–¹æ¡ˆ
- **å¤šç§Ÿæˆ·æ”¯æŒ**: ä¼ä¸šçº§ç”¨æˆ·ç®¡ç†

### 2. æ”¯ä»˜é›†æˆ
- **Stripe è®¢é˜…**: å®Œæ•´çš„è®¢é˜…ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **Webhook å¤„ç†**: è‡ªåŠ¨å¤„ç†æ”¯ä»˜äº‹ä»¶
- **å¤šè´§å¸æ”¯æŒ**: å›½é™…æ”¯ä»˜æ”¯æŒ

### 3. K8s é›†ç¾¤ç®¡ç†
- **é›†ç¾¤åˆ›å»º**: ä¸€é”®éƒ¨ç½² K8s é›†ç¾¤
- **çŠ¶æ€ç›‘æ§**: å®æ—¶é›†ç¾¤çŠ¶æ€è·Ÿè¸ª
- **å¤šåŒºåŸŸæ”¯æŒ**: å…¨çƒæ•°æ®ä¸­å¿ƒéƒ¨ç½²

### 4. å†…å®¹ç®¡ç†
- **MDX æ”¯æŒ**: ä¸°å¯Œçš„æ–‡æ¡£æ ¼å¼
- **SEO ä¼˜åŒ–**: è‡ªåŠ¨ç”Ÿæˆå…ƒæ•°æ®
- **å¤šè¯­è¨€å†…å®¹**: å›½é™…åŒ–å†…å®¹ç®¡ç†

### 5. æ€§èƒ½ä¼˜åŒ–
- **Edge Runtime**: Vercel Edge ç½‘ç»œä¼˜åŒ–
- **å›¾åƒä¼˜åŒ–**: Next.js è‡ªåŠ¨å›¾åƒä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: æ™ºèƒ½ç¼“å­˜ç®¡ç†

## è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ†æ”¯
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ç¼–å†™æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯
- æ·»åŠ é€‚å½“çš„æµ‹è¯•

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚

## æ”¯æŒä¸è”ç³»

- **å®˜æ–¹ç½‘ç«™**: [saasfly.io](https://saasfly.io)
- **æ–‡æ¡£**: [document.saasfly.io](https://document.saasfly.io)
- **æ¼”ç¤º**:
  - ç¾å›½æœåŠ¡å™¨: [show.saasfly.io](https://show.saasfly.io)
  - æ—¥æœ¬æœåŠ¡å™¨: [demo.saasfly.io](https://demo.saasfly.io)
- **Discord**: [åŠ å…¥ç¤¾åŒº](https://discord.gg/8SwSX43wnD)
- **é‚®ç®±**: contact@nextify.ltd

## è‡´è°¢

æœ¬é¡¹ç›®çµæ„Ÿæ¥æºäºï¼š
- [shadcn/taxonomy](https://github.com/shadcn-ui/taxonomy)
- [t3-oss/create-t3-turbo](https://github.com/t3-oss/create-t3-turbo)

---

**Nextify** æä¾›å®Œæ•´çš„ä¼ä¸š SaaS è§£å†³æ–¹æ¡ˆã€‚å¦‚æœ‰å…´è¶£è®¨è®ºæ‚¨çš„é¡¹ç›®æˆ–åªæ˜¯æƒ³ä¸æˆ‘ä»¬äº¤æµï¼Œè¯·éšæ—¶é€šè¿‡ contact@nextify.ltd ä¸æˆ‘ä»¬è”ç³»ã€‚

â¤ï¸ æˆ‘ä»¬ä¸º**éè¥åˆ©ç»„ç»‡æä¾›å…è´¹çš„æŠ€æœ¯æ”¯æŒå’Œéƒ¨ç½²æœåŠ¡**ã€‚

ğŸ™Œ ä»æˆ‘ä»¬çš„å¼€æºé¡¹ç›®ä¸­è·å¾—çš„**æ‰€æœ‰åˆ©æ¶¦å°†å®Œå…¨ç”¨äºæ”¯æŒå¼€æºè®¡åˆ’å’Œæ…ˆå–„äº‹ä¸š**ã€‚
